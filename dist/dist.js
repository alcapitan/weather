"use strict";var u=Object.defineProperty;var c=(e,a)=>u(e,"name",{value:a,configurable:!0});atuiKernel_FooterLastedited(1,6,2023);function showSuggestedResults(e){const a=document.getElementById("suggestions");let l=a.querySelector("ul");for(l||(l=document.createElement("ul"),a.appendChild(l));l.firstChild;)l.removeChild(l.firstChild);if(e.length==0){const d=document.createElement("li");d.innerText="No matching city.",l.appendChild(d)}for(let d=0;d<e.length;d++){const n=document.createElement("li");n.innerText=e[d][0],n.onclick=()=>{sendRequest(e[d][1])},l.appendChild(n)}}c(showSuggestedResults,"showSuggestedResults");const searchButton=document.getElementById("atuiSearchservices_Submit");searchButton.addEventListener("click",createRequest),document.addEventListener("keyup",pressEnter);function pressEnter(e){e.code=="Enter"&&(e.preventDefault(),createRequest())}c(pressEnter,"pressEnter");const logText=document.getElementById("log");logText.innerHTML="Recherchez une ville en France m\xE9tropolitaine.";function log(e){document.getElementById("backgroundToday").style.background="hsl(var(--atuiKernel_Color-A30))",logText.innerHTML=e,logText.style.display="block",document.getElementById("today").style.display="none",document.getElementById("table").style.display="none"}c(log,"log");let inputCity=document.getElementById("atuiSearchservices_Input");inputCity.addEventListener("input",function(){updateSuggestions(inputCity.value)});function createRequest(){if(!navigator.onLine){log("Non connect\xE9 \xE0 Internet.");return}sendRequest(inputCity.value)}c(createRequest,"createRequest");const requestHeader=new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer 8d432d87acf6b2a4e36ee21cd41d5821cb1db3133b673e79dd0f6f0b80cca53f"}),token="8d432d87acf6b2a4e36ee21cd41d5821cb1db3133b673e79dd0f6f0b80cca53f";async function updateSuggestions(e){document.getElementById("backgroundToday").style.background="hsl(var(--atuiKernel_Color-A30))",log("Recherche de villes (0/2)");let a;try{a=await fetch(`https://api.meteo-concept.com/api/location/cities?token=${token}&search=${e}`,{method:"GET",headers:requestHeader,mode:"cors"})}catch{log("Le service de l'API est indisponible.")}const l=await a.json();log("Traitement (1/2)");let d=l.cities.length;d>5&&(d=5);let n=[],o;for(let t=0;t<d;t++){try{o=[l.cities[t].name+" ("+l.cities[t].cp+")",l.cities[t].cp]}catch{o=""}n.push(o)}showSuggestedResults(n),log("S\xE9lectionnez une ville.")}c(updateSuggestions,"updateSuggestions");async function sendRequest(e){document.getElementById("backgroundToday").style.background="hsl(var(--atuiKernel_Color-A30))",log("Recherche des villes (0/3)");let a;try{a=await fetch(`https://api.meteo-concept.com/api/location/cities?token=${token}&search=${e}`,{method:"GET",headers:requestHeader,mode:"cors"})}catch{log("Le service de l'API est indisponible.")}const l=await a.json();if(l.cities.length==0){log("Aucune ville trouv\xE9e.");return}log("R\xE9ception des donn\xE9es m\xE9t\xE9o (1/3)");const d=l.cities[0].insee;try{a=await fetch(`https://api.meteo-concept.com/api/forecast/daily?token=${token}&insee=${d}`,{method:"GET",headers:requestHeader,mode:"cors"})}catch{log("Le service de l'API est indisponible.")}let n=await a.json();log("Traitement (2/3)"),e=n.city.name+" ("+n.city.cp+")";let o=[];for(let t=0;t<8;t++)o[t]={},n.forecast[t].datetime=new Date(n.forecast[t].datetime),o[t].date=[convertDay(n.forecast[t].datetime.getDay()),n.forecast[t].datetime.getDate(),convertMonth(n.forecast[t].datetime.getMonth())],o[t].kmwind=n.forecast[t].wind10m,o[t].kmgust=n.forecast[t].gust10m,o[t].dirwind=n.forecast[t].dirwind10m+180,o[t].weather=n.forecast[t].weather,o[t].temp=(n.forecast[t].tmin+n.forecast[t].tmax)/2,o[t].tempmin=n.forecast[t].tmin,o[t].tempmax=n.forecast[t].tmax,o[t].probarain=n.forecast[t].probarain,o[t].rr10=n.forecast[t].rr10;console.info(o),updateWebpage(o,e)}c(sendRequest,"sendRequest");function convertDay(e){return{0:"Dimanche",1:"Lundi",2:"Mardi",3:"Mercredi",4:"Jeudi",5:"Vendredi",6:"Samedi"}[e]}c(convertDay,"convertDay");function convertMonth(e){return{0:"Janvier",1:"F\xE9vrier",2:"Mars",3:"Avril",4:"Mai",5:"Juin",6:"Juillet",7:"Ao\xFBt",8:"Septembre",9:"Octobre",10:"Novembre",11:"D\xE9cembre"}[e]}c(convertMonth,"convertMonth");function convertInfos(e){return{0:["sun","ensoleill\xE9"],1:["partly-cloudy","\xE9claircies"],2:["partly-cloudy","\xE9claircies"],3:["clouds","nuageux"],4:["clouds","nuageux"],5:["clouds","nuageux"],6:["haze","brouillard"],7:["haze","brouillard"],10:["rain","pluie fine"],11:["heavy-rain","pluie"],12:["torrential-rain","temp\xEAte pluvieuse"],13:["rain","pluie fine"],14:["heavy-rain","pluie"],15:["torrential-rain","temp\xEAte pluvieuse"],16:["haze","brouillard"],20:["light-snow","neige l\xE9g\xE8re"],21:["snow","neige"],22:["snow-storm","temp\xEAte de neige"],30:["rain","pluie fine"],31:["heavy-rain","pluie"],32:["torrential-rain","temp\xEAte pluvieuse"],40:["rain","pluie fine"],41:["heavy-rain","pluie"],42:["torrential-rain","temp\xEAte pluvieuse"],43:["rain","pluie fine"],44:["heavy-rain","pluie"],45:["torrential-rain","temp\xEAte pluvieuse"],46:["rain","pluie fine"],47:["heavy-rain","pluie"],48:["torrential-rain","temp\xEAte pluvieuse"],60:["light-snow","neige l\xE9g\xE8re"],61:["snow","neige"],62:["snow-storm","temp\xEAte de neige"],63:["light-snow","neige l\xE9g\xE8re"],64:["snow","neige"],65:["snow-storm","temp\xEAte de neige"],66:["light-snow","neige l\xE9g\xE8re"],67:["snow","neige"],68:["snow-storm","temp\xEAte de neige"],70:["rain","pluie fine"],71:["heavy-rain","pluie"],72:["torrential-rain","temp\xEAte pluvieuse"],73:["rain","pluie fine"],74:["heavy-rain","pluie"],75:["torrential-rain","temp\xEAte pluvieuse"],76:["rain","pluie fine"],77:["heavy-rain","pluie"],78:["torrential-rain","temp\xEAte pluvieuse"],100:["cloud-lighting","orages"],101:["cloud-lighting","orages"],102:["cloud-lighting","orages"],103:["cloud-lighting","orages"],104:["cloud-lighting","orages"],105:["cloud-lighting","orages"],106:["cloud-lighting","orages"],107:["cloud-lighting","orages"],108:["cloud-lighting","orages"],120:["cloud-lighting","orages"],121:["cloud-lighting","orages"],122:["cloud-lighting","orages"],123:["cloud-lighting","orages"],124:["cloud-lighting","orages"],125:["cloud-lighting","orages"],126:["cloud-lighting","orages"],127:["cloud-lighting","orages"],128:["cloud-lighting","orages"],130:["cloud-lighting","orages"],131:["cloud-lighting","orages"],132:["cloud-lighting","orages"],133:["cloud-lighting","orages"],134:["cloud-lighting","orages"],135:["cloud-lighting","orages"],136:["cloud-lighting","orages"],137:["cloud-lighting","orages"],138:["cloud-lighting","orages"],140:["cloud-lighting","orages"],141:["cloud-lighting","orages"],142:["cloud-lighting","orages"],210:["rain","pluie fine"],211:["heavy-rain","pluie"],212:["torrential-rain","temp\xEAte pluvieuse"],220:["light-snow","neige l\xE9g\xE8re"],221:["snow","neige"],222:["snow-storm","temp\xEAte de neige"],230:["rain","pluie fine"],231:["heavy-rain","pluie"],232:["torrential-rain","temp\xEAte pluvieuse"],235:["hail","gr\xEAle"]}[e]}c(convertInfos,"convertInfos");function updateWebpage(e,a){logText.style.display="none",document.getElementById("today").style.display="flex",document.getElementById("cityToday").textContent=a;let l=document.getElementById("tempTodayMin");l.textContent=e[0].tempmin+" \xB0C";let d=document.getElementById("tempTodayMax");d.textContent=e[0].tempmax+" \xB0C",e[0].temp<=5?document.getElementById("backgroundToday").style.background="var(--veryCold)":e[0].temp<=15?document.getElementById("backgroundToday").style.background="var(--cold)":e[0].temp<=25?document.getElementById("backgroundToday").style.background="var(--lukewarm)":e[0].temp<=35?document.getElementById("backgroundToday").style.background="var(--hot)":e[0].temp>=36&&(document.getElementById("backgroundToday").style.background="var(--veryHot)");let n=document.getElementById("skyTodayImg");n.src="assets/icons/"+convertInfos(e[0].weather)[0]+".png",n.alt="Ic\xF4ne "+convertInfos(e[0].weather)[1],e[0].probarain>50?(document.getElementById("skyTodayProbarain").style.display="block",document.getElementById("skyTodayProbarain").textContent=e[0].probarain+" %",document.getElementById("skyTodayAccumurain").style.display="block",document.getElementById("skyTodayAccumurain").textContent=e[0].rr10+" mm"):(document.getElementById("skyTodayProbarain").style.display="none",document.getElementById("skyTodayAccumurain").style.display="none");let o=document.getElementById("windTodayImg");o.style.transform="rotate("+e[0].dirwind+"deg)";let t=document.getElementById("windTodayMin");t.textContent=e[0].kmwind+" km/h";const s=document.getElementById("windTodayMax");s.textContent=e[0].kmgust+" km/h",document.getElementById("table").style.display="block";const r=document.getElementsByClassName("nextDay");for(i=0;i<r.length;i++)r[i].childNodes[1].innerHTML="<p>"+e[i+1].date[0]+" "+e[i+1].date[1]+" "+e[i+1].date[2]+"</p>",r[i].childNodes[3].childNodes[1].src="assets/icons/"+convertInfos(e[i+1].weather)[0]+".png",r[i].childNodes[3].childNodes[1].alt="Ic\xF4ne "+convertInfos(e[i+1].weather)[1],e[i+1].probarain>50?(r[i].childNodes[3].childNodes[3].childNodes[1].style.display="block",r[i].childNodes[3].childNodes[3].childNodes[1].textContent=e[i+1].probarain+" %",r[i].childNodes[3].childNodes[3].childNodes[3].style.display="block",r[i].childNodes[3].childNodes[3].childNodes[3].textContent=e[i+1].rr10+" mm"):(r[i].childNodes[3].childNodes[3].childNodes[1].style.display="none",r[i].childNodes[3].childNodes[3].childNodes[3].style.display="none"),r[i].childNodes[5].childNodes[1].textContent=e[i+1].tempmin+" \xB0C",r[i].childNodes[5].childNodes[3].textContent=e[i+1].tempmax+" \xB0C",r[i].childNodes[7].childNodes[1].style.transform="rotate("+e[i+1].dirwind+"deg)",r[i].childNodes[7].childNodes[3].childNodes[1].textContent=e[i+1].kmwind+" km/h",r[i].childNodes[7].childNodes[3].childNodes[3].textContent=e[i+1].kmgust+" km/h"}c(updateWebpage,"updateWebpage");
//# sourceMappingURL=dist.js.map
